<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo do Projeto (com IA Avançada): Clínica Vida Saudável</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Professional (Background: #FDFBF8, Text: #3D405B, Accent: #81B29A, Secondary: #E07A5F) -->
    <!-- Application Structure Plan: A single-page application with top navigation to switch between role-specific dashboards (Analista, Arquiteto, Gerente) and project-wide views (Visão Geral, Cronograma, RACI, Recursos). This role-based structure allows each student to quickly find relevant information, while shared sections promote team alignment. Interactive elements like accordions and a dynamic Gantt chart are used to make dense information digestible and engaging, improving usability over a static document. Gemini API features are added to each role's section to act as intelligent assistants. -->
    <!-- Visualization & Content Choices: Report Info: Project Timeline -> Goal: Change -> Viz/Presentation: Interactive Gantt Chart -> Interaction: Hover tooltips showing phase duration -> Justification: More engaging and clearer than a static list of dates, visually communicates project flow. -> Library: Chart.js. Report Info: Role Responsibilities -> Goal: Inform/Organize -> Viz/Presentation: Accordion UI -> Interaction: Click to expand/collapse -> Justification: Prevents information overload on role dashboards, allowing users to drill down into specifics. -> Library/Method: HTML/JS. Report Info: User Story Generation -> Goal: Create/Brainstorm -> Viz/Presentation: Text Input + Button + Output Area -> Interaction: User types a feature, clicks a button, gets AI-generated user stories -> Justification: Assists the Business Analyst in a core task, accelerating the requirements process. -> Library/Method: Gemini API. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #FDFBF8; color: #3D405B; scroll-behavior: smooth; }
        .nav-link { transition: all 0.3s ease; border-bottom: 2px solid transparent; }
        .nav-link.active, .nav-link:hover { border-bottom-color: #81B29A; color: #81B29A; }
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .accordion-title { cursor: pointer; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .accordion-item.open .accordion-content { max-height: 4000px; transition: max-height 1s ease-in; }
        .raci-table td, .raci-table th { text-align: center; }
        .chart-container { position: relative; width: 100%; max-width: 1000px; margin-left: auto; margin-right: auto; height: 400px; max-height: 50vh; }
        @media (min-width: 768px) { .chart-container { height: 500px; } }
        .gemini-feature { border-top: 1px dashed #d1d5db; margin-top: 1.5rem; padding-top: 1.5rem; }
        .gemini-btn {
            background-color: #3D405B;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
            cursor: pointer;
        }
        .gemini-btn:hover { background-color: #55597d; }
        .gemini-btn:disabled { background-color: #9ca3af; cursor: not-allowed; }
        .gemini-output {
            background-color: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            white-space: pre-wrap;
            font-family: monospace;
            min-height: 50px;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #81B29A;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-[#3D405B]">Clínica Vida Saudável</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#visao-geral" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Visão Geral</a>
                        <a href="#analista" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Analista</a>
                        <a href="#arquiteto" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Arquiteto</a>
                        <a href="#gerente" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Gerente</a>
                        <a href="#cronograma" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Cronograma</a>
                        <a href="#raci" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Matriz RACI</a>
                        <a href="#recursos" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Recursos</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-[#3D405B] hover:text-white hover:bg-[#81B29A] focus:outline-none">
                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#visao-geral" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Visão Geral</a>
                    <a href="#analista" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Analista</a>
                    <a href="#arquiteto" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Arquiteto</a>
                    <a href="#gerente" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Gerente</a>
                    <a href="#cronograma" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Cronograma</a>
                    <a href="#raci" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Matriz RACI</a>
                    <a href="#recursos" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Recursos</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <section id="visao-geral" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl">Projeto de Engenharia de Software</h2>
                <p class="mt-4 text-lg text-gray-600">Um guia completo para a equipe de desenvolvimento do sistema de gestão da Clínica Vida Saudável.</p>
            </div>
            <div class="bg-white p-8 rounded-xl shadow-md border border-gray-100 mb-8">
                <h3 class="text-2xl font-semibold text-[#3D405B] mb-4">Boas-vindas ao Desafio Turbinado com IA</h3>
                <p class="text-gray-700 leading-relaxed mb-4">
                    Esta versão do guia foi aprimorada com assistentes de Inteligência Artificial para cada papel. O objetivo é que a IA atue como uma mentora, ajudando a gerar ideias, refinar artefatos e aprofundar o aprendizado.
                </p>
                <p class="text-gray-700 leading-relaxed">
                    Utilizem os botões com o ícone ✨ para acelerar tarefas. Lembrem-se: a IA é uma ferramenta para auxiliar o raciocínio, não para substituí-lo. A decisão final e a qualidade do trabalho continuam sendo de vocês.
                </p>
            </div>
        </section>

        <section id="analista" class="content-section">
            <div class="text-center mb-12"><span class="text-sm font-semibold text-[#81B29A] uppercase tracking-wider">Papel da Equipe</span><h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl mt-2">Analista de Negócios</h2><p class="mt-4 text-lg text-gray-600">A ponte entre as necessidades da clínica e a solução técnica.</p></div>
            <div class="space-y-4">
                <div class="accordion-item bg-white rounded-xl shadow-sm border border-gray-100"><div class="accordion-title flex justify-between items-center p-6"><h3 class="text-xl font-semibold text-[#3D405B]">Missão Principal</h3><span class="text-[#81B29A] transform transition-transform duration-300">▼</span></div><div class="accordion-content px-6 pb-6"><p class="text-gray-700 leading-relaxed">Sua missão é investigar a fundo as necessidades e problemas da Clínica Vida Saudável, traduzindo-os em requisitos claros e compreensíveis para a equipe técnica.</p></div></div>
                <div class="accordion-item bg-white rounded-xl shadow-sm border border-gray-100"><div class="accordion-title flex justify-between items-center p-6"><h3 class="text-xl font-semibold text-[#3D405B]">Entregáveis Concretos</h3><span class="text-[#81B29A] transform transition-transform duration-300">▼</span></div><div class="accordion-content px-6 pb-6 space-y-6">
                    <div class="gemini-feature !pt-0 !border-t-0">
                        <h5 class="text-lg font-semibold text-[#3D405B] mb-2">✨ Assistente de Geração de Histórias de Usuário</h5>
                        <p class="text-gray-600 text-sm mb-3">Descreva uma funcionalidade e a IA irá sugerir Histórias de Usuário.</p>
                        <textarea id="feature-input" class="w-full p-2 border rounded-md" rows="2" placeholder="Ex: Um sistema de notificação para lembrar os pacientes sobre suas consultas."></textarea>
                        <button id="generate-stories-btn" class="gemini-btn mt-2">Gerar Histórias</button>
                        <div id="stories-output" class="gemini-output"></div>
                    </div>
                    <div class="gemini-feature">
                        <h5 class="text-lg font-semibold text-[#3D405B] mb-2">✨ Assistente de Critérios de Aceite</h5>
                        <p class="text-gray-600 text-sm mb-3">Cole uma História de Usuário e a IA irá detalhar os Critérios de Aceite.</p>
                        <textarea id="user-story-input" class="w-full p-2 border rounded-md" rows="2" placeholder="Ex: Como um Paciente, eu quero poder agendar uma consulta online para que eu não precise ligar para a clínica."></textarea>
                        <button id="generate-criteria-btn" class="gemini-btn mt-2">Gerar Critérios</button>
                        <div id="criteria-output" class="gemini-output"></div>
                    </div>
                </div></div>
            </div>
        </section>

        <section id="arquiteto" class="content-section">
            <div class="text-center mb-12"><span class="text-sm font-semibold text-[#81B29A] uppercase tracking-wider">Papel da Equipe</span><h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl mt-2">Arquiteto de Software</h2><p class="mt-4 text-lg text-gray-600">O engenheiro que desenha a espinha dorsal técnica do sistema.</p></div>
             <div class="space-y-4">
                <div class="accordion-item bg-white rounded-xl shadow-sm border border-gray-100"><div class="accordion-title flex justify-between items-center p-6"><h3 class="text-xl font-semibold text-[#3D405B]">Missão Principal</h3><span class="text-[#81B29A] transform transition-transform duration-300">▼</span></div><div class="accordion-content px-6 pb-6"><p class="text-gray-700 leading-relaxed">Sua missão é traduzir os requisitos em um blueprint técnico coeso e robusto. Você decide como o sistema será estruturado e como os componentes interagirão.</p></div></div>
                <div class="accordion-item bg-white rounded-xl shadow-sm border border-gray-100"><div class="accordion-title flex justify-between items-center p-6"><h3 class="text-xl font-semibold text-[#3D405B]">Responsabilidades Específicas</h3><span class="text-[#81B29A] transform transition-transform duration-300">▼</span></div><div class="accordion-content px-6 pb-6 space-y-4">
                    <div class="gemini-feature !pt-0 !border-t-0">
                        <h5 class="text-lg font-semibold text-[#3D405B] mb-2">✨ Assistente de Padrões Arquiteturais</h5>
                        <p class="text-gray-600 text-sm mb-3">Peça à IA para sugerir padrões de arquitetura com base no contexto do nosso projeto.</p>
                        <button id="suggest-arch-btn" class="gemini-btn">Sugerir Padrões</button>
                        <div id="arch-output" class="gemini-output"></div>
                   </div>
                   <div class="gemini-feature">
                        <h5 class="text-lg font-semibold text-[#3D405B] mb-2">✨ Assistente de Design de API</h5>
                        <p class="text-gray-600 text-sm mb-3">Digite um recurso do sistema (ex: Paciente) e a IA irá desenhar os endpoints da API RESTful.</p>
                        <input type="text" id="api-resource-input" class="w-full p-2 border rounded-md" placeholder="Ex: Paciente, Consulta, Médico">
                        <button id="design-api-btn" class="gemini-btn mt-2">Desenhar API</button>
                        <div id="api-output" class="gemini-output"></div>
                    </div>
                </div></div>
            </div>
        </section>

        <section id="gerente" class="content-section">
            <div class="text-center mb-12"><span class="text-sm font-semibold text-[#81B29A] uppercase tracking-wider">Papel da Equipe</span><h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl mt-2">Gerente de Projeto</h2><p class="mt-4 text-lg text-gray-600">O maestro que orquestra o sucesso do projeto.</p></div>
            <div class="space-y-4">
                <div class="accordion-item bg-white rounded-xl shadow-sm border border-gray-100"><div class="accordion-title flex justify-between items-center p-6"><h3 class="text-xl font-semibold text-[#3D405B]">Missão Principal</h3><span class="text-[#81B29A] transform transition-transform duration-300">▼</span></div><div class="accordion-content px-6 pb-6"><p class="text-gray-700 leading-relaxed">Sua missão é garantir que o projeto seja entregue com sucesso, atendendo aos objetivos, respeitando o prazo e o orçamento. Você facilita o trabalho da equipe e gerencia riscos.</p></div></div>
                <div class="accordion-item bg-white rounded-xl shadow-sm border border-gray-100"><div class="accordion-title flex justify-between items-center p-6"><h3 class="text-xl font-semibold text-[#3D405B]">Entregáveis Concretos</h3><span class="text-[#81B29A] transform transition-transform duration-300">▼</span></div><div class="accordion-content px-6 pb-6 space-y-6">
                    <div class="gemini-feature !pt-0 !border-t-0">
                        <h5 class="text-lg font-semibold text-[#3D405B] mb-2">✨ Assistente de Identificação de Riscos</h5>
                        <p class="text-gray-600 text-sm mb-3">Peça à IA para listar riscos comuns para um projeto como este.</p>
                        <button id="identify-risks-btn" class="gemini-btn">Identificar Riscos</button>
                        <div id="risks-output" class="gemini-output"></div>
                   </div>
                   <div class="gemini-feature">
                        <h5 class="text-lg font-semibold text-[#3D405B] mb-2">✨ Assistente de Estrutura Analítica de Projeto (EAP/WBS)</h5>
                        <p class="text-gray-600 text-sm mb-3">Descreva uma entrega principal (ex: Módulo de Agendamento) e a IA irá quebrá-la em tarefas.</p>
                        <input type="text" id="wbs-input" class="w-full p-2 border rounded-md" placeholder="Ex: Módulo de Gestão de Pacientes">
                        <button id="generate-wbs-btn" class="gemini-btn mt-2">Gerar EAP/WBS</button>
                        <div id="wbs-output" class="gemini-output"></div>
                    </div>
                </div></div>
            </div>
        </section>

        <section id="cronograma" class="content-section"><div class="text-center mb-12"><h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl">Cronograma do Projeto (4 Meses)</h2><p class="mt-4 text-lg text-gray-600">Uma visualização interativa das fases e marcos principais.</p></div><div class="bg-white p-4 sm:p-6 lg:p-8 rounded-xl shadow-md border border-gray-100"><div class="chart-container"><canvas id="ganttChart"></canvas></div><p class="text-center text-sm text-gray-500 mt-4">Passe o mouse sobre as barras para ver a duração de cada fase.</p></div></section>
        <section id="raci" class="content-section"><div class="text-center mb-12"><h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl">Matriz de Responsabilidades (RACI)</h2><p class="mt-4 text-lg text-gray-600">Definindo claramente quem faz o quê em cada etapa do projeto.</p></div><div class="bg-white p-4 sm:p-6 lg:p-8 rounded-xl shadow-md border border-gray-100"><div class="flex flex-wrap gap-x-6 gap-y-2 mb-6"><p><span class="font-bold text-blue-600">R</span> = Responsável</p><p><span class="font-bold text-green-600">A</span> = Aprovador</p><p><span class="font-bold text-yellow-600">C</span> = Consultado</p><p><span class="font-bold text-gray-500">I</span> = Informado</p></div><div class="overflow-x-auto"><table class="min-w-full raci-table bg-white border border-gray-200 rounded-lg"><thead class="bg-gray-50"><tr><th class="px-4 py-3 border-b text-left">Atividade / Entregável</th><th class="px-4 py-3 border-b">Analista</th><th class="px-4 py-3 border-b">Arquiteto</th><th class="px-4 py-3 border-b">Gerente</th></tr></thead><tbody class="divide-y divide-gray-200"><tr class="hover:bg-gray-50"><td class="px-4 py-3 text-left font-semibold">Doc. de Requisitos</td><td><span class="font-bold text-blue-600">R</span></td><td><span class="font-bold text-yellow-600">C</span></td><td><span class="font-bold text-green-600">A</span></td></tr><tr class="hover:bg-gray-50"><td class="px-4 py-3 text-left font-semibold">Doc. de Arquitetura</td><td><span class="font-bold text-yellow-600">C</span></td><td><span class="font-bold text-blue-600">R</span></td><td><span class="font-bold text-green-600">A</span></td></tr><tr class="hover:bg-gray-50"><td class="px-4 py-3 text-left font-semibold">Cronograma do Projeto</td><td><span class="font-bold text-gray-500">I</span></td><td><span class="font-bold text-gray-500">I</span></td><td><span class="font-bold text-blue-600">R</span>, <span class="font-bold text-green-600">A</span></td></tr></tbody></table></div></div></section>
        <section id="recursos" class="content-section"><div class="text-center mb-12"><h2 class="text-3xl font-bold text-[#3D405B] sm:text-4xl">Links e Recursos Úteis</h2><p class="mt-4 text-lg text-gray-600">Uma biblioteca centralizada de links para aprofundar seus conhecimentos.</p></div><div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"><h3 class="text-xl font-semibold text-[#3D405B] mb-3">Analista de Negócios</h3><ul class="space-y-2"><li><a href="https://www.atlassian.com/br/agile/project-management/user-stories" target="_blank" class="text-indigo-600 hover:text-indigo-800">Guia de User Stories</a></li><li><a href="https://www.atlassian.com/br/agile/project-management/acceptance-criteria" target="_blank" class="text-indigo-600 hover:text-indigo-800">Guia de Critérios de Aceite</a></li></ul></div><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"><h3 class="text-xl font-semibold text-[#3D405B] mb-3">Arquiteto de Software</h3><ul class="space-y-2"><li><a href="https://www.redhat.com/pt-br/topics/api/what-is-a-rest-api" target="_blank" class="text-indigo-600 hover:text-indigo-800">O que é uma API REST?</a></li><li><a href="https://aws.amazon.com/pt/what-is/microservices/" target="_blank" class="text-indigo-600 hover:text-indigo-800">O que são Microsserviços?</a></li></ul></div><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"><h3 class="text-xl font-semibold text-[#3D405B] mb-3">Gerente de Projeto</h3><ul class="space-y-2"><li><a href="https://www.atlassian.com/br/work-management/project-management/raci-chart" target="_blank" class="text-indigo-600 hover:text-indigo-800">Guia de Gráfico RACI</a></li><li><a href="https://www.projectmanager.com/pt-br/blog/o-que-e-uma-estrutura-analitica-de-projeto-wbs" target="_blank" class="text-indigo-600 hover:text-indigo-800">O que é EAP/WBS?</a></li></ul></div></div></section>

    </main>
    
    <footer class="bg-white mt-12"><div class="container mx-auto px-8 py-4 text-center text-gray-500"><p>&copy; 2025 Guia Interativo do Projeto. Criado para inspirar a próxima geração de Engenheiros de Software.</p></div></footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.content-section');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    function updateContent(hash) {
        let targetHash = hash || window.location.hash || '#visao-geral';
        if (!document.querySelector(targetHash)) {
            targetHash = '#visao-geral';
        }

        sections.forEach(section => {
            section.classList.toggle('active', '#' + section.id === targetHash);
        });

        navLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === targetHash);
        });
        
        mobileMenu.classList.add('hidden');
    }

    navLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const targetHash = this.getAttribute('href');
            history.pushState(null, null, targetHash);
            updateContent(targetHash);
            mobileMenu.classList.add('hidden');
        });
    });

    window.addEventListener('popstate', () => updateContent(window.location.hash));
    updateContent();

    const accordionItems = document.querySelectorAll('.accordion-item');
    accordionItems.forEach(item => {
        const title = item.querySelector('.accordion-title');
        title.addEventListener('click', () => {
            const wasOpen = item.classList.contains('open');
            document.querySelectorAll('.accordion-item.open').forEach(openItem => openItem.classList.remove('open'));
            if (!wasOpen) {
                item.classList.add('open');
            }
        });
    });

    mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
    });

    const ganttCtx = document.getElementById('ganttChart');
    if (ganttCtx) {
        const ganttData = {
            labels: ['Consolidação da Documentação', 'Plano de Projeto Detalhado', 'Design da Arquitetura e UML', 'Levantamento de Requisitos'],
            datasets: [{
                label: 'Fases do Projeto (Semanas)',
                data: [[12, 16], [10, 12], [4, 10], [0, 4]],
                backgroundColor: ['rgba(224, 122, 95, 0.7)', 'rgba(129, 178, 154, 0.7)', 'rgba(61, 64, 91, 0.7)', 'rgba(242, 162, 128, 0.7)'],
                borderWidth: 1, borderSkipped: false, borderRadius: 4, barPercentage: 0.5,
            }]
        };
        new Chart(ganttCtx, {
            type: 'bar', data: ganttData, options: {
                indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { const start = context.raw[0]; const end = context.raw[1]; const duration = end - start; return `${context.dataset.label}: Semanas ${start + 1} a ${end}. Duração: ${duration} semanas.`; } } } },
                scales: { x: { position: 'top', min: 0, max: 16, title: { display: true, text: 'Semanas do Projeto' } }, y: { grid: { display: false } } }
            }
        });
    }

    // --- Gemini API Integration ---
    const apiKey = ""; // Keep this empty as per instructions

    async function callGemini(prompt, outputElement, buttonElement) {
        buttonElement.disabled = true;
        outputElement.innerHTML = '<div class="loader"></div>';
        
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
        const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };

        try {
            const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!response.ok) { throw new Error(`API call failed with status: ${response.status}`); }
            const result = await response.json();
            if (result.candidates && result.candidates[0]?.content?.parts[0]) {
                const text = result.candidates[0].content.parts[0].text;
                outputElement.textContent = text;
            } else { throw new Error("Resposta da API inválida ou vazia."); }
        } catch (error) {
            console.error("Gemini API call error:", error);
            outputElement.textContent = `Erro ao chamar a API: ${error.message}. Verifique o console para mais detalhes.`;
        } finally {
            buttonElement.disabled = false;
        }
    }

    // Feature: User Story Generator
    const generateStoriesBtn = document.getElementById('generate-stories-btn');
    if(generateStoriesBtn) {
        generateStoriesBtn.addEventListener('click', () => {
            const featureInput = document.getElementById('feature-input').value;
            const storiesOutput = document.getElementById('stories-output');
            if (!featureInput) { storiesOutput.textContent = "Por favor, descreva uma funcionalidade."; return; }
            const prompt = `Como um Analista de Negócios para um sistema de gestão de clínica, gere 3 a 5 histórias de usuário bem detalhadas, no formato "Como um [ATOR], eu quero [AÇÃO], para que [BENEFÍCIO].", para a seguinte funcionalidade: "${featureInput}". Os atores possíveis são: Paciente, Recepcionista, Médico, Administrador da Clínica.`;
            callGemini(prompt, storiesOutput, generateStoriesBtn);
        });
    }

    // Feature: Acceptance Criteria Generator
    const generateCriteriaBtn = document.getElementById('generate-criteria-btn');
    if (generateCriteriaBtn) {
        generateCriteriaBtn.addEventListener('click', () => {
            const userStoryInput = document.getElementById('user-story-input').value;
            const criteriaOutput = document.getElementById('criteria-output');
            if (!userStoryInput) { criteriaOutput.textContent = "Por favor, insira uma História de Usuário."; return; }
            const prompt = `Como um Analista de QA Sênior, revise a seguinte história de usuário para um sistema de gestão de clínica: "${userStoryInput}". Gere uma lista de 5 a 7 Critérios de Aceitação detalhados para esta história, usando o formato "Dado que [contexto], Quando [ação], Então [resultado]". Os critérios devem ser específicos, testáveis e cobrir cenários de sucesso e de erro.`;
            callGemini(prompt, criteriaOutput, generateCriteriaBtn);
        });
    }

    // Feature: Architecture Suggester
    const suggestArchBtn = document.getElementById('suggest-arch-btn');
    if(suggestArchBtn) {
        suggestArchBtn.addEventListener('click', () => {
            const archOutput = document.getElementById('arch-output');
            const prompt = `Como um Arquiteto de Software, sugira 2 ou 3 padrões de arquitetura (como Monolítico, Microsserviços, MVC, Arquitetura em Camadas) para um novo sistema de gestão para uma clínica de médio porte. O sistema precisa ser seguro, responsivo e escalável. Para cada padrão, explique brevemente uma vantagem e uma desvantagem no contexto deste projeto.`;
            callGemini(prompt, archOutput, suggestArchBtn);
        });
    }

    // Feature: API Design Assistant
    const designApiBtn = document.getElementById('design-api-btn');
    if (designApiBtn) {
        designApiBtn.addEventListener('click', () => {
            const apiResourceInput = document.getElementById('api-resource-input').value;
            const apiOutput = document.getElementById('api-output');
            if (!apiResourceInput) { apiOutput.textContent = "Por favor, insira um recurso do sistema (ex: Paciente)."; return; }
            const prompt = `Como um Arquiteto de Software experiente, projete os endpoints de uma API RESTful para gerenciar o recurso "${apiResourceInput}" em um sistema de gestão de clínica. Liste os principais endpoints (GET, POST, PUT, DELETE) com seus respectivos métodos HTTP, URLs (ex: /api/pacientes) e uma breve descrição do que cada um faz. Forneça um exemplo simples de corpo de requisição JSON para o método POST.`;
            callGemini(prompt, apiOutput, designApiBtn);
        });
    }

    // Feature: Risk Identifier
    const identifyRisksBtn = document.getElementById('identify-risks-btn');
    if(identifyRisksBtn) {
        identifyRisksBtn.addEventListener('click', () => {
            const risksOutput = document.getElementById('risks-output');
            const prompt = `Como um Gerente de Projeto, identifique 5 riscos potenciais para um projeto de software acadêmico de 4 meses, desenvolvido por uma equipe de 3 estudantes, para criar um sistema de gestão de clínica pela primeira vez. Para cada risco, sugira uma breve ação de mitigação.`;
            callGemini(prompt, risksOutput, identifyRisksBtn);
        });
    }

    // Feature: WBS Generator
    const generateWbsBtn = document.getElementById('generate-wbs-btn');
    if (generateWbsBtn) {
        generateWbsBtn.addEventListener('click', () => {
            const wbsInput = document.getElementById('wbs-input').value;
            const wbsOutput = document.getElementById('wbs-output');
            if (!wbsInput) { wbsOutput.textContent = "Por favor, insira uma entrega ou fase do projeto."; return; }
            const prompt = `Como um Gerente de Projetos experiente, crie uma Estrutura Analítica de Projeto (EAP / WBS) para a seguinte fase de um projeto de software de gestão de clínica: "${wbsInput}". Quebre a fase em pelo menos dois níveis de tarefas (entregáveis principais e subtarefas). Apresente a estrutura em formato de lista hierárquica (usando hifens ou asteriscos para indentação).`;
            callGemini(prompt, wbsOutput, generateWbsBtn);
        });
    }
});
</script>

</body>
</html>
